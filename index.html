<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="img/favicon.ico" />
    <title>Usage - Unlearn Diff</title>
    <link rel="stylesheet" href="css/theme.css" />
    <link rel="stylesheet" href="css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "Usage";
        var mkdocs_page_input_path = "README.md";
        var mkdocs_page_url = null;
      </script>
    
    <!--[if lt IE 9]>
      <script src="js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
      <script>hljs.highlightAll();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="." class="icon icon-home"> Unlearn Diff
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="./search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption"><span class="caption-text">Home</span></p>
              <ul class="current">
                  <li class="toctree-l1 current"><a class="reference internal current" href="#">Usage</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#installation">Installation</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#prerequisities">Prerequisities</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#downloading-data-and-models">Downloading data and models.</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#run-train">Run Train</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#example-usage-running-machine-unlearning-with-the-esd-algorithm">Example Usage: Running Machine Unlearning with the ESD Algorithm:</a>
    </li>
    </ul>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Unlearn Algorithms</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" >Concept Ablation</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="unlearn/algorithms/concept_ablation/">Usage</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="unlearn/examples/concept_ablation/">Examples</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="unlearn/configs/concept_ablation/">Configs</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="evaluation/concept_ablation/">Evaluation</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" >Erase Diff</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="unlearn/algorithms/erase_diff/">Usage</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="unlearn/examples/erase_diff/">Examples</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="unlearn/configs/erase_diff/">Configs</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="evaluation/erase_diff/">Evaluation</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" >ESD</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="unlearn/algorithms/esd/">Usage</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="unlearn/examples/esd/">Examples</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="unlearn/configs/esd/">Configs</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="evaluation/esd/">Evaluation</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" >Forget Me Not</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="unlearn/algorithms/forget_me_not/">Usage</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="unlearn/examples/forget_me_not/">Examples</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="unlearn/configs/forget_me_not/">Configs</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="evaluation/forget_me_not/">Evaluation</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" >Saliency Unlearning</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="unlearn/algorithms/saliency/">Usage</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="unlearn/examples/saliency/">Examples</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="unlearn/configs/saliency/">Configs</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="evaluation/saliency/">Evaluation</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" >Scissor Hands</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="unlearn/algorithms/scissorhands/">Usage</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="unlearn/examples/scissorhands/">Examples</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="unlearn/configs/scissorhands/">Configs</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="evaluation/scissorhands/">Evaluation</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" >Selective Amnesia</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="unlearn/algorithms/selective_amnesia/">Usage</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="unlearn/examples/selective_amnesia/">Examples</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="unlearn/configs/selective_amnesia/">Configs</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" >Semi Permeable Membrane</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="unlearn/algorithms/semipermeable_membrane/">Usage</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="unlearn/examples/semipermeable_membrane/">Examples</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="unlearn/configs/semipermeable_membrane/">Configs</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="evaluation/semipermeable_membrane/">Evaluation</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" >Unified Concept Editing</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="unlearn/algorithms/uce/">Usage</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="unlearn/examples/uce/">Examples</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="unlearn/configs/uce/">Configs</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="evaluation/uce/">Evaluation</a>
                </li>
    </ul>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Unlearn Mu Attack</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" >Hard Prompt</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="mu_attack/attack/hard_prompt/">Usage</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="mu_attack/configs/hard_prompt/">Config</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" >No attack</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="mu_attack/attack/no_attack/">Usage</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="mu_attack/configs/no_attack/">Config</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" >Random</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="mu_attack/attack/random/">Usage</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="mu_attack/configs/random/">Config</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" >Seed Search</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="mu_attack/attack/seed_search/">Usage</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="mu_attack/configs/seed_search/">Config</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" >Text Grad</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="mu_attack/attack/text_grad/">Usage</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="mu_attack/configs/text_grad/">Config</a>
                </li>
    </ul>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Unlearn Mu Defense</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" >Adv Unlearn</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="mu_defense/adv_unlearn/">Usage</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="mu_defense/config/">Config</a>
                </li>
    </ul>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Evaluation</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" >MU</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" >Concept Ablation</a>
    <ul>
                <li class="toctree-l3"><a class="reference internal" href="evaluation/concept_ablation/">Evaluation</a>
                </li>
    </ul>
                </li>
                <li class="toctree-l2"><a class="reference internal" >Erase Diff</a>
    <ul>
                <li class="toctree-l3"><a class="reference internal" href="evaluation/erase_diff/">Evaluation</a>
                </li>
    </ul>
                </li>
                <li class="toctree-l2"><a class="reference internal" >ESD</a>
    <ul>
                <li class="toctree-l3"><a class="reference internal" href="evaluation/esd/">Evaluation</a>
                </li>
    </ul>
                </li>
                <li class="toctree-l2"><a class="reference internal" >Forget Me Not</a>
    <ul>
                <li class="toctree-l3"><a class="reference internal" href="evaluation/forget_me_not/">Evaluation</a>
                </li>
    </ul>
                </li>
                <li class="toctree-l2"><a class="reference internal" >Saliency Unlearning</a>
    <ul>
                <li class="toctree-l3"><a class="reference internal" href="evaluation/saliency/">Evaluation</a>
                </li>
    </ul>
                </li>
                <li class="toctree-l2"><a class="reference internal" >Scissor Hands</a>
    <ul>
                <li class="toctree-l3"><a class="reference internal" href="evaluation/scissorhands/">Evaluation</a>
                </li>
    </ul>
                </li>
                <li class="toctree-l2"><a class="reference internal" >Semi Permeable Membrane</a>
    <ul>
                <li class="toctree-l3"><a class="reference internal" href="evaluation/semipermeable_membrane/">Evaluation</a>
                </li>
    </ul>
                </li>
                <li class="toctree-l2"><a class="reference internal" >Unified Concept Editing</a>
    <ul>
                <li class="toctree-l3"><a class="reference internal" href="evaluation/uce/">Evaluation</a>
                </li>
    </ul>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" >MU_Attack</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="mu_attack/mu_attack_evaluation/">Usage</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" >MU_Defense</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="mu_defense/evaluation/">Usage</a>
                </li>
    </ul>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Contributing</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="unlearn/algorithms/contributing/">Contributing</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href=".">Unlearn Diff</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="." class="icon icon-home" aria-label="Docs"></a></li>
          <li class="breadcrumb-item">Home</li>
      <li class="breadcrumb-item active">Usage</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h2 id="usage">Usage</h2>
<p>This section contains the usage guide for the package.</p>
<h3 id="installation">Installation</h3>
<h4 id="prerequisities">Prerequisities</h4>
<p>Ensure <code>conda</code> is installed on your system. You can install Miniconda or Anaconda:</p>
<ul>
<li><strong>Miniconda</strong> (recommended): <a href="https://docs.conda.io/en/latest/miniconda.html">https://docs.conda.io/en/latest/miniconda.html</a></li>
<li><strong>Anaconda</strong>: <a href="https://www.anaconda.com/products/distribution">https://www.anaconda.com/products/distribution</a></li>
</ul>
<p>After installing <code>conda</code>, ensure it is available in your PATH by running. You may require to restart the terminal session:</p>
<p>Before installing the unlearn_diff package, follow these steps to set up your environment correctly. These instructions ensure compatibility with the required dependencies, including Python, PyTorch, and ONNX Runtime.</p>
<p><strong>Step-by-Step Setup:</strong></p>
<p>Step 1. Create a Conda Environment Create a new Conda environment named myenv with Python 3.8.5:</p>
<pre><code class="language-bash">conda create -n myenv python=3.8.5
</code></pre>
<p>Step 2. Activate the Environment Activate the environment to work within it:</p>
<pre><code class="language-bash">conda activate myenv
</code></pre>
<p>Step 3. Install Core Dependencies Install PyTorch, torchvision, CUDA Toolkit, and ONNX Runtime with specific versions:</p>
<pre><code class="language-bash">conda install pytorch==1.11.0 torchvision==0.12.0 cudatoolkit=11.3 onnxruntime==1.16.3 -c pytorch -c conda-forge
</code></pre>
<p>Step 4. Install our unlearn_diff Package using pip:</p>
<pre><code class="language-bash">pip install unlearn_diff
</code></pre>
<p>Step 5. Install Additional Git Dependencies:</p>
<p>After installing unlearn_diff, install the following Git-based dependencies in the same Conda environment to ensure full functionality:</p>
<pre><code class="language-bash">pip install git+https://github.com/CompVis/taming-transformers.git@master#egg=taming-transformers
</code></pre>
<pre><code class="language-bash">pip install git+https://github.com/openai/CLIP.git@main#egg=clip
</code></pre>
<pre><code class="language-bash">pip install git+https://github.com/crowsonkb/k-diffusion.git
</code></pre>
<pre><code class="language-bash">pip install git+https://github.com/cocodataset/panopticapi.git
</code></pre>
<pre><code class="language-bash">pip install git+https://github.com/Phoveran/fastargs.git@main#egg=fastargs
</code></pre>
<pre><code class="language-bash">pip install git+https://github.com/boomb0om/text2image-benchmark
</code></pre>
<h3 id="downloading-data-and-models">Downloading data and models.</h3>
<p>After you install the package, you can use the following commands to download.</p>
<ol>
<li><strong>Dataset</strong>:</li>
<li><strong>i2p</strong>:<ul>
<li><strong>Sample</strong>:
 <code>download_data sample i2p</code></li>
<li><strong>Full</strong>:
 <code>download_data full i2p</code></li>
</ul>
</li>
<li>
<p><strong>quick_canvas</strong>:</p>
<ul>
<li><strong>Sample</strong>:
 <code>download_data sample quick_canvas</code></li>
<li><strong>Full</strong>:
 <code>download_data full quick_canvas</code></li>
</ul>
</li>
<li>
<p><strong>Model</strong>:</p>
</li>
<li><strong>compvis</strong>:
    <code>download_model compvis</code></li>
<li><strong>diffuser</strong>:
    <code>download_model diffuser</code></li>
</ol>
<h3 id="run-train">Run Train <br></h3>
<p>Each algorithm has their own script to run the algorithm, Some also have different process all together. Follow usage section in readme for the algorithm you want to run with the help of the github repository. You will need to run the code snippet provided in usage section with necessary configuration passed. </p>
<h3 id="example-usage-running-machine-unlearning-with-the-esd-algorithm">Example Usage: Running Machine Unlearning with the ESD Algorithm:</h3>
<p>After successfully installing the package, you can run machine unlearning using the ESDAlgorithm. Below is a refined example that demonstrates how to import the necessary modules, configure the algorithm, and execute the unlearning process:</p>
<pre><code class="language-python">    from mu.algorithms.esd.algorithm import ESDAlgorithm
    from mu.algorithms.esd.configs import esd_train_mu

    algorithm = ESDAlgorithm(
        esd_train_mu,
        ckpt_path=&quot;models/compvis/style50/compvis.ckpt&quot;,
        raw_dataset_dir=&quot;data/quick-canvas-dataset/sample&quot;,
        use_sample = True, #uses sample dataset
        template_name = &quot;Abstractionism&quot;,
        dataset_type = &quot;unlearncanvas&quot;
    )
    algorithm.run()
</code></pre>
<p>For detailed information on the ESD algorithm and its configuration, please refer to the detailed documentation <a href="https://ramailotech.github.io/msu_unlearningalgorithm/unlearn/algorithms/esd/">here</a>.</p>
<p>Refer <a href="https://ramailotech.github.io/msu_unlearningalgorithm/unlearn/examples/esd/#">here</a> for instructions on overriding default configurations and creating your own configuration class. You can also review detailed configuration descriptions <a href="https://ramailotech.github.io/msu_unlearningalgorithm/unlearn/configs/esd/">here</a></p>
<p><strong>Link to our example usage notebooks</strong></p>
<p>Additionally, we have provided comprehensive notebooks that cover the complete workflow—from unlearning to attack and defense—along with their evaluation. Please refer to the notebooks below for full example usage.</p>
<ol>
<li><strong>Erase-diff (compvis model)</strong></li>
</ol>
<p>https://github.com/RamailoTech/msu_unlearningalgorithm/blob/main/notebooks/run_erase_diff.ipynb</p>
<ol>
<li><strong>forget-me-not (Diffuser model)</strong></li>
</ol>
<p>https://github.com/RamailoTech/msu_unlearningalgorithm/blob/main/notebooks/run_forget_me_not.ipynb</p>
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href="unlearn/algorithms/concept_ablation/" class="btn btn-neutral float-right" title="Usage">Next <span class="icon icon-circle-arrow-right"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
    
      <span><a href="unlearn/algorithms/concept_ablation/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script src="js/jquery-3.6.0.min.js"></script>
    <script>var base_url = ".";</script>
    <script src="js/theme_extra.js"></script>
    <script src="js/theme.js"></script>
      <script src="search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
