<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="../../img/favicon.ico" />
    <title>How to use existing unlearning algorithms - Unlearn Diff</title>
    <link rel="stylesheet" href="../../css/theme.css" />
    <link rel="stylesheet" href="../../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "How to use existing unlearning algorithms";
        var mkdocs_page_input_path = "usage/unlearn_algorithm_usage.md";
        var mkdocs_page_url = null;
      </script>
    
    <!--[if lt IE 9]>
      <script src="../../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
      <script>hljs.highlightAll();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="../.." class="icon icon-home"> Unlearn Diff
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption"><span class="caption-text">Usage</span></p>
              <ul class="current">
                  <li class="toctree-l1"><a class="reference internal" href="../installation/">Installation</a>
                  </li>
                  <li class="toctree-l1 current"><a class="reference internal current" href="#">How to use existing unlearning algorithms</a>
    <ul class="current">
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../how_to_evaluate/">How to evaluate</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Unlearn Algorithms</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" >Concept Ablation</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../../unlearn/algorithms/concept_ablation/">Usage</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../unlearn/examples/concept_ablation/">Examples</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../unlearn/configs/concept_ablation/">Configs</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" >Erase Diff</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../../unlearn/algorithms/erase_diff/">Usage</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../unlearn/examples/erase_diff/">Examples</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../unlearn/configs/erase_diff/">Configs</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" >ESD</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../../unlearn/algorithms/esd/">Usage</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../unlearn/examples/esd/">Examples</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../unlearn/configs/esd/">Configs</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" >Forget Me Not</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../../unlearn/algorithms/forget_me_not/">Usage</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../unlearn/examples/forget_me_not/">Examples</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../unlearn/configs/forget_me_not/">Configs</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" >Saliency Unlearning</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../../unlearn/algorithms/saliency/">Usage</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../unlearn/examples/saliency/">Examples</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../unlearn/configs/saliency/">Configs</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" >Scissor Hands</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../../unlearn/algorithms/scissorhands/">Usage</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../unlearn/examples/scissorhands/">Examples</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../unlearn/configs/scissorhands/">Configs</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" >Selective Amnesia</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../../unlearn/algorithms/selective_amnesia/">Usage</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../unlearn/examples/selective_amnesia/">Examples</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../unlearn/configs/selective_amnesia/">Configs</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" >Semi Permeable Membrane</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../../unlearn/algorithms/semipermeable_membrane/">Usage</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../unlearn/examples/semipermeable_membrane/">Examples</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../unlearn/configs/semipermeable_membrane/">Configs</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" >Unified Concept Editing</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../../unlearn/algorithms/uce/">Usage</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../unlearn/examples/uce/">Examples</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../unlearn/configs/uce/">Configs</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" >Adv Unlearn</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../../unlearn/mu_defense/adv_unlearn/">Usage</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../unlearn/mu_defense/config/">Config</a>
                </li>
    </ul>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Evaluation</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" >Non-Attack evalaution</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" >No attack</a>
    <ul>
                <li class="toctree-l3"><a class="reference internal" href="../../mu_attack/attack/no_attack/">Usage</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../../mu_attack/configs/no_attack/">Config</a>
                </li>
    </ul>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" >Robustness Eval UnlearnDiffAtk</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" >Hard Prompt</a>
    <ul>
                <li class="toctree-l3"><a class="reference internal" href="../../mu_attack/attack/hard_prompt/">Usage</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../../mu_attack/configs/hard_prompt/">Config</a>
                </li>
    </ul>
                </li>
                <li class="toctree-l2"><a class="reference internal" >Random</a>
    <ul>
                <li class="toctree-l3"><a class="reference internal" href="../../mu_attack/attack/random/">Usage</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../../mu_attack/configs/random/">Config</a>
                </li>
    </ul>
                </li>
                <li class="toctree-l2"><a class="reference internal" >Seed Search</a>
    <ul>
                <li class="toctree-l3"><a class="reference internal" href="../../mu_attack/attack/seed_search/">Usage</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../../mu_attack/configs/seed_search/">Config</a>
                </li>
    </ul>
                </li>
                <li class="toctree-l2"><a class="reference internal" >Text Grad</a>
    <ul>
                <li class="toctree-l3"><a class="reference internal" href="../../mu_attack/attack/text_grad/">Usage</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../../mu_attack/configs/text_grad/">Config</a>
                </li>
    </ul>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" >Utility Eval</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" >Concept Ablation</a>
    <ul>
                <li class="toctree-l3"><a class="reference internal" href="../../evaluation/concept_ablation/">Usage</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../../evaluation/configs/concept_ablation/">Config</a>
                </li>
    </ul>
                </li>
                <li class="toctree-l2"><a class="reference internal" >Erase Diff</a>
    <ul>
                <li class="toctree-l3"><a class="reference internal" href="../../evaluation/erase_diff/">Usage</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../../evaluation/configs/erase_diff/">Config</a>
                </li>
    </ul>
                </li>
                <li class="toctree-l2"><a class="reference internal" >ESD</a>
    <ul>
                <li class="toctree-l3"><a class="reference internal" href="../../evaluation/esd/">Usage</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../../evaluation/configs/esd/">Config</a>
                </li>
    </ul>
                </li>
                <li class="toctree-l2"><a class="reference internal" >Forget Me Not</a>
    <ul>
                <li class="toctree-l3"><a class="reference internal" href="../../evaluation/forget_me_not/">Usage</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../../evaluation/configs/forget_me_not/">Config</a>
                </li>
    </ul>
                </li>
                <li class="toctree-l2"><a class="reference internal" >Saliency Unlearning</a>
    <ul>
                <li class="toctree-l3"><a class="reference internal" href="../../evaluation/saliency/">Usage</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../../evaluation/configs/saliency/">Config</a>
                </li>
    </ul>
                </li>
                <li class="toctree-l2"><a class="reference internal" >Scissor Hands</a>
    <ul>
                <li class="toctree-l3"><a class="reference internal" href="../../evaluation/scissorhands/">Usage</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../../evaluation/configs/scissorhands/">Config</a>
                </li>
    </ul>
                </li>
                <li class="toctree-l2"><a class="reference internal" >Semi Permeable Membrane</a>
    <ul>
                <li class="toctree-l3"><a class="reference internal" href="../../evaluation/semipermeable_membrane/">Usage</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../../evaluation/configs/semipermeable_membrane/">Config</a>
                </li>
    </ul>
                </li>
                <li class="toctree-l2"><a class="reference internal" >Unified Concept Editing</a>
    <ul>
                <li class="toctree-l3"><a class="reference internal" href="../../evaluation/uce/">Usage</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../../evaluation/configs/uce/">Config</a>
                </li>
    </ul>
                </li>
                <li class="toctree-l2"><a class="reference internal" >MU_Defense</a>
    <ul>
                <li class="toctree-l3"><a class="reference internal" href="../../evaluation/adv_unlearn_evaluation/">Usage</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../../evaluation/configs/adv_unlearn_evaluation/">Config</a>
                </li>
    </ul>
                </li>
    </ul>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Contributing</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../evaluation/contributing/">How to contribute</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../..">Unlearn Diff</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../.." class="icon icon-home" aria-label="Docs"></a></li>
          <li class="breadcrumb-item">Usage</li>
      <li class="breadcrumb-item active">How to use existing unlearning algorithms</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h3 id="run-train">Run Train <br></h3>
<p>Each algorithm has their own script to run the algorithm, Some also have different process all together. Follow usage section in readme for the algorithm you want to run with the help of the github repository. You will need to run the code snippet provided in usage section with necessary configuration passed. </p>
<p><strong>Example usage for erase_diff algorithm (CompVis model)</strong></p>
<p><strong>Note: Currently we only have support for unlearn canvas dataset. I2p and generic dataset support needs to be added.</strong></p>
<p>The default configuration for training is provided by erase_diff_train_mu. You can run the training with the default settings as follows:</p>
<p><strong>Using the Default Configuration</strong></p>
<pre><code class="language-python">from mu.algorithms.erase_diff.algorithm import EraseDiffAlgorithm
from mu.algorithms.erase_diff.configs import erase_diff_train_mu

algorithm = EraseDiffAlgorithm(
    erase_diff_train_mu
)
algorithm.run()
</code></pre>
<p><br> <br></p>
<p><strong>Overriding the Default Configuration</strong></p>
<p>If you need to override the existing configuration settings, you can specify your custom parameters (such as ckpt_path and raw_dataset_dir) directly when initializing the algorithm. For example:</p>
<p><strong>Machine unlearning using unlearn canvas dataset:</strong></p>
<pre><code class="language-python">from mu.algorithms.erase_diff.algorithm import EraseDiffAlgorithm
from mu.algorithms.erase_diff.configs import erase_diff_train_mu

algorithm = EraseDiffAlgorithm(
    erase_diff_train_mu,
    ckpt_path=&quot;/home/ubuntu/Projects/UnlearnCanvas/UnlearnCanvas/machine_unlearning/models/compvis/style50/compvis.ckpt&quot;, #replace it with your ckpt path
    raw_dataset_dir=&quot;data/quick-canvas-dataset/sample&quot;,
    use_sample = True, #uses sample dataset
    template_name = &quot;Abstractionism&quot;,
    dataset_type = &quot;unlearncanvas&quot;,
    devices = &quot;0&quot;
)
algorithm.run()
</code></pre>
<p><span style="color: red;"><br>Note: When fine-tuning the model, if you want to use a sample dataset, set use_sample=True (default).Otherwise, set use_sample=False to use the full dataset.<br></span></p>
<p><strong>Note</strong>
You can choose from a set of predefined <code>template_name</code> options to erase specific concept when working with the <code>unlearncanvas</code> dataset to perform unlearning. For instance, in the i2p context, the available choices include:</p>
<pre><code>&quot;Abstractionism&quot;, &quot;Artist_Sketch&quot;, &quot;Blossom_Season&quot;, &quot;Bricks&quot;, &quot;Byzantine&quot;, &quot;Cartoon&quot;,
 &quot;Cold_Warm&quot;, &quot;Color_Fantasy&quot;, &quot;Comic_Etch&quot;, &quot;Crayon&quot;, &quot;Cubism&quot;, &quot;Dadaism&quot;, &quot;Dapple&quot;,
 &quot;Defoliation&quot;, &quot;Early_Autumn&quot;, &quot;Expressionism&quot;, &quot;Fauvism&quot;, &quot;French&quot;, &quot;Glowing_Sunset&quot;,
 &quot;Gorgeous_Love&quot;, &quot;Greenfield&quot;, &quot;Impressionism&quot;, &quot;Ink_Art&quot;, &quot;Joy&quot;, &quot;Liquid_Dreams&quot;,
 &quot;Magic_Cube&quot;, &quot;Meta_Physics&quot;, &quot;Meteor_Shower&quot;, &quot;Monet&quot;, &quot;Mosaic&quot;, &quot;Neon_Lines&quot;, &quot;On_Fire&quot;,
 &quot;Pastel&quot;, &quot;Pencil_Drawing&quot;, &quot;Picasso&quot;, &quot;Pop_Art&quot;, &quot;Red_Blue_Ink&quot;, &quot;Rust&quot;, &quot;Seed_Images&quot;,
 &quot;Sketch&quot;, &quot;Sponge_Dabbed&quot;, &quot;Structuralism&quot;, &quot;Superstring&quot;, &quot;Surrealism&quot;, &quot;Ukiyoe&quot;,
 &quot;Van_Gogh&quot;, &quot;Vibrant_Flow&quot;, &quot;Warm_Love&quot;, &quot;Warm_Smear&quot;, &quot;Watercolor&quot;, &quot;Winter&quot;
</code></pre>
<p><strong>Machine unlearning with i2p dataset</strong></p>
<pre><code class="language-python">from mu.algorithms.erase_diff.algorithm import EraseDiffAlgorithm
from mu.algorithms.erase_diff.configs import erase_diff_train_i2p

algorithm = EraseDiffAlgorithm(
    erase_diff_train_i2p,
    ckpt_path=&quot;/home/ubuntu/Projects/UnlearnCanvas/UnlearnCanvas/machine_unlearning/models/compvis/style50/compvis.ckpt&quot;, #replace it with your ckpt path
    raw_dataset_dir=&quot;data/i2p-dataset/sample&quot;,
    num_samples = 1,
    dataset_type = &quot;i2p&quot;,
    template = &quot;i2p&quot;,
    template_name = &quot;self-harm&quot;, #concept to erase
    use_sample = True, #uses sample dataset
    devices = &quot;0&quot;

)
algorithm.run()
</code></pre>
<p><strong>Note</strong>
You can choose from a set of predefined <code>template_name</code> options to erase specific concept when working with the <code>i2p</code> dataset to perform unlearning. For instance, in the i2p context, the available choices include:</p>
<p><code>'shocking', 'harassment', 'hate', 'self-harm', 'sexual', 'illegal activity', 'violence'</code></p>
<h3 id="add-your-own-unlearning-algorithms"><strong>Add your own unlearning algorithms:</strong></h3>
<p>For detailed instructions on adding your own algorithm, please see the <a href="#contribution-section">Contribution</a> section.</p>
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href="../installation/" class="btn btn-neutral float-left" title="Installation"><span class="icon icon-circle-arrow-left"></span> Previous</a>
        <a href="../how_to_evaluate/" class="btn btn-neutral float-right" title="How to evaluate">Next <span class="icon icon-circle-arrow-right"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
      <span><a href="../installation/" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="../how_to_evaluate/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script src="../../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "../..";</script>
    <script src="../../js/theme_extra.js"></script>
    <script src="../../js/theme.js"></script>
      <script src="../../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
